<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Alexey Tereshenkov" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="python-basics, python, python-basics, " />

<meta property="og:title" content="Python basics - Collections "/>
<meta property="og:url" content="/python-basics-collections.html" />
<meta property="og:description" content="This is one of the posts in a series of introductory Python articles. These posts explain programming principles in a simplified way and show very basic Python code that should help folks learning Python to get a better understanding of some concepts. In this post, I’ll share some notes …" />
<meta property="og:site_name" content="Alexey Tereshenkov" />
<meta property="og:article:author" content="Alexey Tereshenkov" />
<meta property="og:article:published_time" content="2021-08-08T00:00:00+01:00" />
<meta property="og:article:modified_time" content="2021-08-08T00:00:00+01:00" />
<meta name="twitter:title" content="Python basics - Collections ">
<meta name="twitter:description" content="This is one of the posts in a series of introductory Python articles. These posts explain programming principles in a simplified way and show very basic Python code that should help folks learning Python to get a better understanding of some concepts. In this post, I’ll share some notes …">

        <title>Python basics - Collections  · Alexey Tereshenkov
</title>
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Alexey Tereshenkov - Full Atom Feed" />
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-177875539-1', 'auto');
    ga('send', 'pageview');
</script>


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/"><span class=site-name>Alexey Tereshenkov</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       "/"
                                    >Home</a>
                                </li>
                                <li ><a href="/categories.html">Categories</a></li>
                                <li ><a href="/tags.html">Tags</a></li>
                                <li ><a href="/archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="/python-basics-collections.html">
                Python basics - Collections
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#collectionsdefaultdict">collections.defaultdict</a></li>
<li><a href="#collectionsnamedtuple">collections.namedtuple</a></li>
<li><a href="#list-and-dictionary-comprehensions">List and dictionary comprehensions</a></li>
<li><a href="#set-comprehensions-and-set-theory-operations">Set comprehensions and set theory operations</a></li>
<li><a href="#enumerated-sequences">Enumerated sequences</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<p>This is one of the posts in a series of introductory Python articles. These posts explain programming principles in a simplified way and show very basic Python code that should help folks learning Python to get a better understanding of some concepts. In this post, I’ll share some notes about working with useful containers from the <code>collections</code> module and various data structures that beginners may find useful. </p>
<h2 id="collectionsdefaultdict"><code>collections.defaultdict</code><a class="headerlink" href="#collectionsdefaultdict" title="Permanent link">¶</a></h2>
<p>When iterating over some text files or any other kind of data structures, you may want to construct a dictionary with the key referring to a single object (e.g., a string) and the values referring to a list of objects (e.g., strings). However, when you create a new dictionary, there are no keys present, so you first have to add an empty list as the value for each of the keys and then start appending strings to the respective lists. Let’s see how it works on a simpler example first. We cannot append a city name to the dictionary’s key value as there is no list created yet, so we have to initialize the value making it an empty list for all new keys we find.</p>
<div class="highlight"><pre><span></span><code><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">'Zone'</span><span class="p">,</span> <span class="s1">'West'</span><span class="p">),</span> <span class="p">(</span><span class="s1">'Zone'</span><span class="p">,</span> <span class="s1">'East'</span><span class="p">),</span> 
        <span class="p">(</span><span class="s1">'Cluster'</span><span class="p">,</span> <span class="s1">'US'</span><span class="p">),</span> <span class="p">(</span><span class="s1">'Cluster'</span><span class="p">,</span> <span class="s1">'EU'</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">d</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">d</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1"># {'Zone': ['West', 'East'], 'Cluster': ['US', 'EU']}</span>
</code></pre></div>
<p>Using the <code>collections.defaultdict</code>, it is possible to create a dictionary structure where every key will already have a pre-assigned value of a certain type, such as <code>list</code> or <code>int</code>. This results in much cleaner code.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>

<span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">'Zone'</span><span class="p">,</span> <span class="s1">'West'</span><span class="p">),</span> <span class="p">(</span><span class="s1">'Zone'</span><span class="p">,</span> <span class="s1">'East'</span><span class="p">),</span> 
        <span class="p">(</span><span class="s1">'Cluster'</span><span class="p">,</span> <span class="s1">'US'</span><span class="p">),</span> <span class="p">(</span><span class="s1">'Cluster'</span><span class="p">,</span> <span class="s1">'EU'</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
    <span class="n">dd</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dd</span><span class="p">)</span>

<span class="c1"># defaultdict(&lt;class 'list'&gt;, {'Zone': ['West', 'East'], 'Cluster': ['US', 'EU']})</span>
</code></pre></div>
<p>This could also be done using the dictionary’s <code>setdefault()</code> method. This means that a default value, which is an empty list in this case, will always be computed if the key is not present in the dictionary yet.</p>
<div class="highlight"><pre><span></span><code><span class="n">sd</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">'Zone'</span><span class="p">,</span> <span class="s1">'West'</span><span class="p">),</span> <span class="p">(</span><span class="s1">'Zone'</span><span class="p">,</span> <span class="s1">'East'</span><span class="p">),</span> 
        <span class="p">(</span><span class="s1">'Cluster'</span><span class="p">,</span> <span class="s1">'US'</span><span class="p">),</span> <span class="p">(</span><span class="s1">'Cluster'</span><span class="p">,</span> <span class="s1">'EU'</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
    <span class="n">sd</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sd</span><span class="p">)</span>
<span class="c1"># {'Zone': ['West', 'East'], 'Cluster': ['US', 'EU']}</span>
</code></pre></div>
<p>Another neat feature of a dictionary is that it is possible to get a default value if a key is not present. This is done by using the <code>get()</code> method for which you can supply a default value. In the code snippet below, as there is no <code>Port</code> key in the dictionary, instead of getting <code>None</code>, we would like to get some default value instead.</p>
<div class="highlight"><pre><span></span><code><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'LogLevel'</span><span class="p">:</span> <span class="s1">'Verbose'</span><span class="p">,</span> <span class="s1">'Database'</span><span class="p">:</span> <span class="s1">'Production'</span><span class="p">}</span>
<span class="nb">print</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'LogLevel'</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'Database'</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'Machine'</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'Port'</span><span class="p">,</span> <span class="mi">1433</span><span class="p">)</span>
<span class="c1"># Verbose</span>
<span class="c1"># Production</span>
<span class="c1"># None</span>
<span class="c1"># 1433</span>
</code></pre></div>
<h2 id="collectionsnamedtuple"><code>collections.namedtuple</code><a class="headerlink" href="#collectionsnamedtuple" title="Permanent link">¶</a></h2>
<p>Another useful class from the <code>collections</code> module is <code>namedtuple</code>. This one becomes very handy when working with tuples of many items particularly when you need to access the individual items within a tuple. Usually records returned from a database table are represented as lists of tuples. Named tuples let you access fields of the returned records by name rather than by index. When working with a tuple of potentially a hundred fields, it is easy to make mistakes in indexing and access a wrong field. Compare these two snippets and see how more readable the second one is. With the named tuple, you can refer to a field by its name instead of using the <code>[index]</code> syntax:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># using tuple indexing for accessing database table fields </span>
<span class="n">envs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"Development"</span><span class="p">,</span> <span class="s2">"west-us"</span><span class="p">,</span> <span class="mi">27134</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Staging"</span><span class="p">,</span> <span class="s2">"east-us"</span><span class="p">,</span> <span class="mi">48628</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Production"</span><span class="p">,</span> <span class="s2">"west-eu"</span><span class="p">,</span> <span class="mi">78951</span><span class="p">),</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">envs</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Environment </span><span class="si">{name}</span><span class="s2"> in </span><span class="si">{cluster}</span><span class="s2"> had </span><span class="si">{requests}</span><span class="s2"> requests"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">env</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cluster</span><span class="o">=</span><span class="n">env</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">requests</span><span class="o">=</span><span class="n">env</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
<span class="c1"># Environment Development in west-us had 27134 requests</span>
<span class="c1"># Environment Staging in east-us had 48628 requests</span>
<span class="c1"># Environment Production in west-eu had 78951 requests</span>
</code></pre></div>
<p>The same information represented with the help of named tuples:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># using named tuples for accessing database table fields</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>

<span class="n">envs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"Development"</span><span class="p">,</span> <span class="s2">"west-us"</span><span class="p">,</span> <span class="mi">27134</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Staging"</span><span class="p">,</span> <span class="s2">"east-us"</span><span class="p">,</span> <span class="mi">48628</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Production"</span><span class="p">,</span> <span class="s2">"west-eu"</span><span class="p">,</span> <span class="mi">78951</span><span class="p">),</span>
<span class="p">]</span>

<span class="n">Environment</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">'Environment'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'Name'</span><span class="p">,</span> <span class="s1">'Cluster'</span><span class="p">,</span> <span class="s1">'Requests'</span><span class="p">])</span>
<span class="n">environments</span> <span class="o">=</span> <span class="p">[</span><span class="n">Environment</span><span class="p">(</span><span class="o">*</span><span class="n">env</span><span class="p">)</span> <span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">envs</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">environments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># named tuple object</span>

<span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">environments</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Environment </span><span class="si">{name}</span><span class="s2"> in </span><span class="si">{cluster}</span><span class="s2"> had </span><span class="si">{requests}</span><span class="s2"> requests"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">Name</span><span class="p">,</span> <span class="n">cluster</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">Cluster</span><span class="p">,</span> <span class="n">requests</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">Requests</span><span class="p">))</span>

<span class="c1"># Environment(Name='Development', Cluster='west-us', Requests=27134)</span>

<span class="c1"># Environment Development in west-us had 27134 requests</span>
<span class="c1"># Environment Staging in east-us had 48628 requests</span>
<span class="c1"># Environment Production in west-eu had 78951 requests</span>
</code></pre></div>
<h2 id="list-and-dictionary-comprehensions">List and dictionary comprehensions<a class="headerlink" href="#list-and-dictionary-comprehensions" title="Permanent link">¶</a></h2>
<p>One may need to construct a dictionary from some other data structure such as a JSON file or a collection of records such as a list of tuples. Regardless of the data structure that is being used, a <em>dictionary comprehension</em> provides an intuitive and easy to read interface for creating a dictionary in a very similar way to how lists are constructed with the help of list comprehensions.</p>
<div class="highlight"><pre><span></span><code><span class="n">envs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"Development"</span><span class="p">,</span> <span class="s2">"west-us"</span><span class="p">,</span> <span class="mi">27134</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Staging"</span><span class="p">,</span> <span class="s2">"east-us"</span><span class="p">,</span> <span class="mi">48628</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Production"</span><span class="p">,</span> <span class="s2">"west-eu"</span><span class="p">,</span> <span class="mi">78951</span><span class="p">),</span>
<span class="p">]</span>

<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="n">env</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">env</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">envs</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1"># {'Development': 'west-us', 'Staging': 'east-us', 'Production': 'west-eu'}</span>
</code></pre></div>
<p>A dictionary comprehension can be arbitrarily complex:</p>
<div class="highlight"><pre><span></span><code><span class="n">envs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"Development"</span><span class="p">,</span> <span class="s2">"west-us"</span><span class="p">,</span> <span class="mi">27134</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Staging"</span><span class="p">,</span> <span class="s2">"east-us"</span><span class="p">,</span> <span class="mi">48628</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Production"</span><span class="p">,</span> <span class="s2">"west-eu"</span><span class="p">,</span> <span class="mi">78951</span><span class="p">),</span>
<span class="p">]</span>

<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="n">env</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">env</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">envs</span> <span class="k">if</span> <span class="s1">'us'</span> <span class="ow">in</span> <span class="n">env</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1"># {'Development': 'WEST-US', 'Staging': 'EAST-US'}</span>
</code></pre></div>
<p>It can also be useful to combine dictionary comprehensions with <em>list comprehensions</em> when constructing a collection of dictionaries.</p>
<div class="highlight"><pre><span></span><code><span class="n">envs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"Development"</span><span class="p">,</span> <span class="s2">"west-us"</span><span class="p">,</span> <span class="mi">27134</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Staging"</span><span class="p">,</span> <span class="s2">"east-us"</span><span class="p">,</span> <span class="mi">48628</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Production"</span><span class="p">,</span> <span class="s2">"west-eu"</span><span class="p">,</span> <span class="mi">78951</span><span class="p">),</span>
<span class="p">]</span>

<span class="n">d</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">"environment"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="n">env</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">"cluster"</span><span class="p">:</span> <span class="n">env</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">"requests"</span><span class="p">:</span> <span class="n">env</span><span class="p">[</span><span class="mi">2</span><span class="p">]}}</span> <span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">envs</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1"># [</span>
<span class="c1">#  {'environment': {'type': 'Development', 'cluster': 'west-us', 'requests': 27134}},</span>
<span class="c1">#  {'environment': {'type': 'Staging', 'cluster': 'east-us', 'requests': 48628}},</span>
<span class="c1">#  {'environment': {'type': 'Production', 'cluster': 'west-eu', 'requests': 78951}},</span>
<span class="c1"># ]</span>
</code></pre></div>
<p>In order to create a list, we’ve used the list comprehension which is a very powerful technique for constructing structures based on some other data structure in a single line.</p>
<h2 id="set-comprehensions-and-set-theory-operations">Set comprehensions and set theory operations<a class="headerlink" href="#set-comprehensions-and-set-theory-operations" title="Permanent link">¶</a></h2>
<p>You can think of sets as of dictionaries of keys with no values. A set can contain only unique values which makes it suitable for all kinds of tasks, for example, deleting duplicates in a list. Sets are also very handy for any kind of data comparison operations such as comparing values of a collection when order and duplication of values don’t matter. Sets are created using the <code>set(iterable)</code> expression.</p>
<div class="highlight"><pre><span></span><code><span class="n">input_values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">input_values</span><span class="p">))</span>
<span class="c1"># {1, 2, 3, 4, 5}</span>
</code></pre></div>
<p>A <em>set comprehension</em> created by using the <code>{}</code> curly brackets, or braces, could be used to get only unique values out of some data collection without constructing a list first:</p>
<div class="highlight"><pre><span></span><code><span class="n">envs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"Development"</span><span class="p">,</span> <span class="s2">"west-us"</span><span class="p">,</span> <span class="mi">27134</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Staging1"</span><span class="p">,</span> <span class="s2">"east-us"</span><span class="p">,</span> <span class="mi">48628</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Staging2"</span><span class="p">,</span> <span class="s2">"east-us"</span><span class="p">,</span> <span class="mi">31456</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Production"</span><span class="p">,</span> <span class="s2">"west-eu"</span><span class="p">,</span> <span class="mi">78951</span><span class="p">),</span>
<span class="p">]</span>
<span class="n">clusters</span> <span class="o">=</span> <span class="p">{</span><span class="n">env</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">env</span> <span class="ow">in</span> <span class="n">envs</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">clusters</span><span class="p">)</span>
<span class="c1"># {'west-us', 'west-eu', 'east-us'}</span>
</code></pre></div>
<p><a href="https://en.wikipedia.org/wiki/Set_theory">Set theory</a> is a branch of mathematics that provides logic for working with sets. It defines certain rules that make it possible to perform all kinds of logical operations between two sets:</p>
<ul>
<li>intersection: find items that are common to both sets</li>
<li>symmetric difference: find items that are either in the first or in the second set, but not in both sets</li>
<li>union: get all items in both sets and add them into a single set with no duplicates</li>
<li>difference: find items that are in the first set, but not in the second set</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># intersection</span>
<span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Development'</span><span class="p">,</span> <span class="s1">'Staging'</span><span class="p">,</span> <span class="s1">'Production'</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Development'</span><span class="p">,</span> <span class="s1">'Staging'</span><span class="p">,</span> <span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">list2</span><span class="p">))</span>
<span class="c1"># {'Development', 'Staging'}</span>

<span class="c1"># symmetric difference</span>
<span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Development'</span><span class="p">,</span> <span class="s1">'Staging'</span><span class="p">,</span> <span class="s1">'Production'</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Development'</span><span class="p">,</span> <span class="s1">'Staging'</span><span class="p">,</span> <span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">]</span>
<span class="nb">print</span> <span class="nb">set</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span> <span class="o">^</span> <span class="nb">set</span><span class="p">(</span><span class="n">list2</span><span class="p">)</span>
<span class="c1"># {'Production', 'Green', 'Blue'}</span>

<span class="c1"># union</span>
<span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Development'</span><span class="p">,</span> <span class="s1">'Staging'</span><span class="p">,</span> <span class="s1">'Production'</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Development'</span><span class="p">,</span> <span class="s1">'Staging'</span><span class="p">,</span> <span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">]</span>
<span class="nb">print</span> <span class="nb">set</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">list2</span><span class="p">)</span>
<span class="c1"># {'Production', 'Development', 'Blue', 'Green', 'Staging'}</span>

<span class="c1"># difference</span>
<span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Development'</span><span class="p">,</span> <span class="s1">'Staging'</span><span class="p">,</span> <span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Development'</span><span class="p">,</span> <span class="s1">'Staging'</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">list2</span><span class="p">))</span>
<span class="c1"># {'Green', 'Blue'}</span>
</code></pre></div>
<p>However, many other operations such as searching whether a list is a part of another list (that is, a list is a <em>sublist</em> of another list) can be easily done with a plain list comprehension:</p>
<div class="highlight"><pre><span></span><code><span class="n">inventory</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Development'</span><span class="p">,</span> <span class="s1">'Staging'</span><span class="p">,</span> <span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">]</span>
<span class="n">demand</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Development'</span><span class="p">,</span> <span class="s1">'Staging'</span><span class="p">,</span> <span class="s1">'Production'</span><span class="p">]</span>

<span class="c1"># finding common items</span>
<span class="nb">print</span><span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">inventory</span> <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">demand</span><span class="p">])</span>
<span class="c1"># ['Development', 'Staging']</span>

<span class="c1"># finding items unique to inventory</span>
<span class="nb">print</span><span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">inventory</span> <span class="k">if</span> <span class="n">item</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">demand</span><span class="p">])</span>
<span class="c1"># ['Blue', 'Green']</span>
</code></pre></div>
<h2 id="enumerated-sequences">Enumerated sequences<a class="headerlink" href="#enumerated-sequences" title="Permanent link">¶</a></h2>
<p>At some point of time, you may work with a collection of items and you may need to pair each of the item with its index. The index may need to start at some arbitrary number and increase as you work your way up. A simple way to do that would be to use a counter variable. This may be required to have when inserting rows into a database table or for any other operation that would require having a unique identifier for each of the items.</p>
<div class="highlight"><pre><span></span><code><span class="n">states</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'UNKNOWN'</span><span class="p">,</span> <span class="s1">'ACTIVE'</span><span class="p">,</span> <span class="s1">'DEPRECATED'</span><span class="p">]</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">states_indexed</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
    <span class="n">states_indexed</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">count</span><span class="p">,</span> <span class="n">state</span><span class="p">))</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="n">states_indexed</span><span class="p">)</span>
<span class="c1"># [(10, 'UNKNOWN'), (11, 'ACTIVE'), (12, 'DEPRECATED')]</span>
</code></pre></div>
<p>A more elegant solution to this would be to use a built-in function <code>enumerate()</code> that does exactly that.</p>
<div class="highlight"><pre><span></span><code><span class="n">states</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'UNKNOWN'</span><span class="p">,</span> <span class="s1">'ACTIVE'</span><span class="p">,</span> <span class="s1">'DEPRECATED'</span><span class="p">]</span>
<span class="nb">print</span><span class="p">([(</span><span class="n">index</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">state</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">states</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">10</span><span class="p">)])</span>
<span class="c1"># [(10, 'UNKNOWN'), (11, 'ACTIVE'), (12, 'DEPRECATED')]</span>
</code></pre></div>
<p>Happy structuring!</p>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2021-08-08T00:00:00+01:00">Sun 08 August 2021</time>

            <h4>Category</h4>
            <a class="category-link" href="/categories.html#python-basics-ref">python-basics</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#python-ref">python
                    <span class="superscript">17</span>
</a></li>
                <li><a href="/tags.html#python-basics-ref">python-basics
                    <span class="superscript">4</span>
</a></li>
            </ul>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="/theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>